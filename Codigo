import random
import os
import time
import RPi.GPIO as GPIO
GPIO.setmode(GPIO.BCM)

contrasenas = {'color':'azul','flor':'amapola','animal':'perro','ciudad':'madrid','col$
puls = 4
LEDA = 17
LEDR = 22

GPIO.setup(puls,GPIO.IN)
GPIO.setup(LEDA,GPIO.OUT)
GPIO.setup(LEDR,GPIO.OUT)

while True:

        GPIO.output(LEDA,False)
        GPIO.output(LEDR,False)

        if GPIO.input(puls) == True:

                GPIO.output(LEDA,True)
                num = random.randint(0,4)
                pos = list(contrasenas.keys())[num]
                clave = input(list(contrasenas.keys())[num])
                if clave == list(contrasenas.values())[num]:

                        print ("Clave correcta")
                        GPIO.output(LEDA,False)
                        time.sleep(1)

                else:

                        GPIO.output(LEDR,True)
                        os.system('cp llamada.call l.call')
                        os.system('mv l.call /var/spool/asterisk/outgoing')
                        time.sleep(8)

        else:

                print ("No se detecta movimiento")
                time.sleep(1)
